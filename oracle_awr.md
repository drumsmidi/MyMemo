# AWR

- [パフォーマンス]-[SQL]-[SQLチューニング・アドバイザ]  
　「履歴SQL(AWR)」から負荷の高いSQLの情報を照会可能  

- SQLの検索は正直使いづらいので、SQL実行できる場合はSQL文を用意した方がいい

```SQL
-- AWRレポート取得
SELECT * FROM TABLE(DBMS_XPLAN.DISPLAY_AWR('SQL ID', NULL, NULL, 'ALL'));

-- スナップショット取得
SELECT DISTINCT
    SQL.SNAP_ID
,   SNAP.BEGIN_INTERVAL_TIME
,   SQL.SQL_ID
,   SQL.PLAN_HASH_VALUE
FROM
    SYS.WRH$_SQLSTAT  SQL
,   SYS.WRM$_SNAPSHOT SNAP
WHERE
    SQL.SNAP_ID = SNAP.SNAP_ID
AND SQL.SQL_ID = 'SQL ID'
ORDER BY
    SQL.SNAP_ID
/

```

